# SPDX-License-Identifier: MIT
---
dependency:
  name: galaxy
driver:
  name: docker
lint: |
  set -eux
  ansible-lint -v
platforms:
  - name: centos-6
    image: docker.io/linuxsystemroles/centos-6
    privileged: true
  - name: centos-7
    # note - centos/systemd is currently only for centos7
    image: registry.centos.org/centos/systemd:latest
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:ro
    command: /usr/sbin/init
    privileged: true
    pre_build_image: true
  - name: centos-8
    image: registry.centos.org/centos:8
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:ro
    command: /usr/sbin/init
    privileged: true
    pre_build_image: true
provisioner:
  name: ansible
  log: true
  playbooks:
    converge: ../../tests/tests_default.yml
  env:
    ANSIBLE_ROLES_PATH: ../../tests/roles
scenario:
  test_sequence:
    - destroy
    - create
    - converge
    - idempotence
    - check
    - destroy
verifier:
  name: testinfra
